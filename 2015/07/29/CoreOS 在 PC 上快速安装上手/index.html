<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CoreOS 在 PC 上快速安装上手 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="###    意义
能够以最快的速度安装部署Linux操作系统。安装快速简单，几乎不花时间就可以开始运行Docker。运行速度非常快。使用内存硬盘。
###    我的情况
win8 笔记本偶尔玩游戏，但是装Linux双系统可能需要我一天的时间来完成。我的所有业务都只需要在Docker中跑就可以了。而且我笔记本电脑内存够大16g （感谢HUST 姜老师）。

![](http://hao.liuf">
<meta property="og:type" content="article">
<meta property="og:title" content="CoreOS 在 PC 上快速安装上手">
<meta property="og:url" content="http://yoursite.com/2015/07/29/CoreOS 在 PC 上快速安装上手/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="###    意义
能够以最快的速度安装部署Linux操作系统。安装快速简单，几乎不花时间就可以开始运行Docker。运行速度非常快。使用内存硬盘。
###    我的情况
win8 笔记本偶尔玩游戏，但是装Linux双系统可能需要我一天的时间来完成。我的所有业务都只需要在Docker中跑就可以了。而且我笔记本电脑内存够大16g （感谢HUST 姜老师）。

![](http://hao.liuf">
<meta property="og:updated_time" content="2016-10-20T03:53:17.542Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CoreOS 在 PC 上快速安装上手">
<meta name="twitter:description" content="###    意义
能够以最快的速度安装部署Linux操作系统。安装快速简单，几乎不花时间就可以开始运行Docker。运行速度非常快。使用内存硬盘。
###    我的情况
win8 笔记本偶尔玩游戏，但是装Linux双系统可能需要我一天的时间来完成。我的所有业务都只需要在Docker中跑就可以了。而且我笔记本电脑内存够大16g （感谢HUST 姜老师）。

![](http://hao.liuf">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-CoreOS 在 PC 上快速安装上手" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/29/CoreOS 在 PC 上快速安装上手/" class="article-date">
  <time datetime="2015-07-29T05:28:36.000Z" itemprop="datePublished">2015-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CoreOS 在 PC 上快速安装上手
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###<br>    意义</p>
<pre><code>能够以最快的速度安装部署Linux操作系统。安装快速简单，几乎不花时间就可以开始运行Docker。运行速度非常快。使用内存硬盘。
</code></pre><p>###<br>    我的情况</p>
<pre><code>win8 笔记本偶尔玩游戏，但是装Linux双系统可能需要我一天的时间来完成。我的所有业务都只需要在Docker中跑就可以了。而且我笔记本电脑内存够大16g （感谢HUST 姜老师）。

![](http://hao.liufu.cc/content/uploadfile/201507/f77e55d68f3fbdb04a20d3ea6368441a20150729053252.jpg)
</code></pre><p>###<br>    准备</p>
<ol>
<li>CoreOS image&nbsp;<a href="https://coreos.com/os/docs/latest/booting-with-iso.html" target="_blank" rel="external">下载地址</a></li>
<li>EasyBCD&nbsp;<a href="http://www.pc6.com/softview/SoftView_53180.html" target="_blank" rel="external">下载地址</a></li>
</ol>
<p>###<br>    开工</p>
<ol>
<li>安装EasyBCD添加ISO引导项文件直接使用CoreOS的livecd image</li>
</ol>
<p>详细步骤带截图：<a href="http://jingyan.baidu.com/article/466506586ed309f549e5f81c.html" target="_blank" rel="external">http://jingyan.baidu.com/article/466506586ed309f549e5f81c.html</a></p>
<ol>
<li>启动CoreOS完成CoreOS安装</li>
</ol>
<p>###<br>    更新</p>
<pre><code>只需要给启动用的ISO文件更新即可。
</code></pre><p>###<br>    缺点</p>
<ol>
<li>不能持久化（带来的优点，玩坏了，直接重启即可）</li>
<li>整个操作系统都在硬盘中生成的文件直接占用硬盘空间（带来的优点，硬盘速度提升非常高）</li>
<li><p>每次开机手动挂载硬盘空间，手动运行整个系统的初始化脚本。</p>
<p>结合优缺点这里建议这套配置给有确定业务的工作来做还可以，如果业务比较多，可能需要优化的点比较多。</p>
</li>
</ol>
<p>###<br>    配置</p>
<ol>
<li>在硬盘上开一个100g大小的空间，并格式化，参考命令：<code>mkfs.ext4 /dev/sda2</code>&nbsp;，然后挂载。如果您不明白如何分区格式化并且挂载，请看考<a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Disks" target="_blank" rel="external">这里</a>。这篇文章可以说是我见过关于初级磁盘管理最好的一篇文章了。</li>
<li><p>挂载之后复制文件夹<code>/var/lib/docker/</code>&nbsp;到挂载的位置，再软连接回去。（然后docker images就可以持久化放到硬盘里面了重启不会丢失）。参考操作如下：</p>
<p>cp -rf /var/lib/docker /mnt/<br>rm -rf /var/lib/docker<br>ln -s /mnt/docker /var/lib/docker`</p>
<p>### </p>
<pre><code>我的初始化文件参考
</code></pre><pre class="prettyprint linenums" style="line-height:23.799999237060547px;white-space:pre-wrap;font-size:14px;background-color:#FFFFFF;">`mkdir /root/.ssh
echo "ssh-rsa xxx..(省略)....xx Li-jianying@lijianyings-MacBook-Pro.local" &gt; /root/.ssh/authorized_keys

rm -rf /var/lib/docker
ln -s /mnt/docker /var/lib/docker
#echo ’DOCKER_OPTS="--registry-mirror=http://XXXXX.m.daocloud.io"’ &gt;&gt; /run/flannel_docker_opts.env
#systemctl daemon-reload
systemctl restart docker
# using disk`</pre>

<pre><code>先导入rsakey，然后软连接到docker位置。

添加daocloud 加速（官方虽然没写CoreOS怎么加速，但是有大神给出了方法），因为我不加速比加速快，所以这里就先注释掉。作为备选方案。
</code></pre><p>### </p>
<pre><code>systemd遇到的坑

如果docker中返回错误-1容器就会挂掉。但是systemd中还存在scope。

当启动问题容器会提示
</code></pre><pre class="prettyprint linenums" style="line-height:23.799999237060547px;white-space:pre-wrap;font-size:14px;background-color:#FFFFFF;">`Error response from daemon: Cannot start container test: [8] System error: Unit docker-e10eb86807cd9971fc03a8eee732771193d506ed2ba678fdf4292916a9fb072c.scope already exists.`</pre>

<pre><code>那么
</code></pre><p><pre class="prettyprint linenums" style="line-height:23.799999237060547px;white-space:pre-wrap;font-size:14px;background-color:#FFFFFF;">`systemctl stop docker-e10eb86807cd9971fc03a8eee732771193d506ed2ba678fdf4292916a9fb072c.scope</pre></p>
<p>就可以搞定。</p>
</li>
</ol>
<p>###<br>    CoreOS.iso 遇到的坑2</p>
<pre><code>不断确认KnowHosts。

参考解决&amp;nbsp;[https://github.com/lijianying10/FixLinux/blob/master/note/取消sshPublicKeyKnowHost认证.md](https://github.com/lijianying10/FixLinux/blob/master/note/%E5%8F%96%E6%B6%88sshPublicKeyKnowHost%E8%AE%A4%E8%AF%81.md)
</code></pre><p>###<br>    总结</p>
<pre><code>用这种方法在PC中部署Linux实在是太方便了。熟悉Docker一套的这种想法可能20分钟就可以根据自己的情况搞定。
</code></pre><p>我找到了这个思路之后经过各种权衡。</p>
<ol>
<li>为了快速解决引导问题 用EasyBCD 直接引导内存ISO启动&nbsp;换&nbsp;折腾UEFI Grub的问题</li>
<li>为了减少配置环境带来的时间成本从普通安装到硬盘里面的发型版本&nbsp;换&nbsp;CoreOS</li>
<li>为了避免错误操作Or版本升级给系统带来的不稳定因素&nbsp;换&nbsp;Docker</li>
<li>在未来也许&nbsp;换&nbsp;RKT,RunC(希望大婶们快点填坑，RunC说这个月Release不知道会不会跳票)</li>
<li>注意本方案是不惜一切代价用最简洁的环境配置来换开发时间。完美主义喜欢折腾的小伙伴可能要绕行了。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/07/29/CoreOS 在 PC 上快速安装上手/" data-id="ciuhtpxzo000jn8fidw8gt5ty" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/favicon/">favicon</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/04/Sublime Text 3 免费使用方法与简体中文汉化包下载/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Sublime Text 3 免费使用方法与简体中文汉化包下载
        
      </div>
    </a>
  
  
    <a href="/2015/07/29/Linux 下载/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Linux 下载</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Html-css/">Html+css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码项目/">代码项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/动漫/">动漫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实用软件/">实用软件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/搜集整理/">搜集整理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/教程书籍/">教程书籍</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/游戏软件/">游戏软件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统工具/">系统工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/综艺娱乐/">综艺娱乐</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程软件/">编程软件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/英语/">英语</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计美化/">设计美化</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/A200/">A200</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/A2000/">A2000</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOS/">DOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dreamweaver/">Dreamweaver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/E6/">E6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fireworks/">Fireworks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flash/">Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HP8/">HP8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hash/">Hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Html/">Html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/InDesign/">InDesign</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lightroom/">Lightroom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsDn/">MsDn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Photoshop/">Photoshop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server/">Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Soundbooth/">Soundbooth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T100/">T100</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T180/">T180</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T300/">T300</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T600/">T600</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T680/">T680</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T800/">T800</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T900/">T900</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/T980/">T980</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/U7/">U7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/U9/">U9</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adobe/">adobe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/audition/">audition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/favicon/">favicon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lamp/">lamp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/md5校验工具/">md5校验工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/technicalpreview/">technicalpreview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows2003/">windows2003</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows7/">windows7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows8/">windows8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xp/">xp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人教版/">人教版</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动漫下载/">动漫下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习机/">学习机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习机资料/">学习机资料</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/我的世界/">我的世界</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/综艺娱乐/">综艺娱乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程/">编程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/A200/" style="font-size: 20px;">A200</a> <a href="/tags/A2000/" style="font-size: 20px;">A2000</a> <a href="/tags/DOS/" style="font-size: 10px;">DOS</a> <a href="/tags/Dreamweaver/" style="font-size: 10px;">Dreamweaver</a> <a href="/tags/E6/" style="font-size: 20px;">E6</a> <a href="/tags/Fireworks/" style="font-size: 10px;">Fireworks</a> <a href="/tags/Flash/" style="font-size: 10px;">Flash</a> <a href="/tags/HP8/" style="font-size: 20px;">HP8</a> <a href="/tags/Hash/" style="font-size: 10px;">Hash</a> <a href="/tags/Html/" style="font-size: 10px;">Html</a> <a href="/tags/InDesign/" style="font-size: 10px;">InDesign</a> <a href="/tags/Lightroom/" style="font-size: 10px;">Lightroom</a> <a href="/tags/MsDn/" style="font-size: 10px;">MsDn</a> <a href="/tags/Photoshop/" style="font-size: 11.67px;">Photoshop</a> <a href="/tags/Server/" style="font-size: 11.67px;">Server</a> <a href="/tags/Soundbooth/" style="font-size: 10px;">Soundbooth</a> <a href="/tags/T100/" style="font-size: 20px;">T100</a> <a href="/tags/T180/" style="font-size: 20px;">T180</a> <a href="/tags/T300/" style="font-size: 20px;">T300</a> <a href="/tags/T600/" style="font-size: 20px;">T600</a> <a href="/tags/T680/" style="font-size: 20px;">T680</a> <a href="/tags/T800/" style="font-size: 20px;">T800</a> <a href="/tags/T900/" style="font-size: 20px;">T900</a> <a href="/tags/T980/" style="font-size: 20px;">T980</a> <a href="/tags/U7/" style="font-size: 20px;">U7</a> <a href="/tags/U9/" style="font-size: 20px;">U9</a> <a href="/tags/adobe/" style="font-size: 10px;">adobe</a> <a href="/tags/audition/" style="font-size: 10px;">audition</a> <a href="/tags/favicon/" style="font-size: 16.67px;">favicon</a> <a href="/tags/lamp/" style="font-size: 10px;">lamp</a> <a href="/tags/md5校验工具/" style="font-size: 10px;">md5校验工具</a> <a href="/tags/meta/" style="font-size: 10px;">meta</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/technicalpreview/" style="font-size: 10px;">technicalpreview</a> <a href="/tags/vpn/" style="font-size: 11.67px;">vpn</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/windows2003/" style="font-size: 11.67px;">windows2003</a> <a href="/tags/windows7/" style="font-size: 11.67px;">windows7</a> <a href="/tags/windows8/" style="font-size: 13.33px;">windows8</a> <a href="/tags/wordpress/" style="font-size: 10px;">wordpress</a> <a href="/tags/xp/" style="font-size: 11.67px;">xp</a> <a href="/tags/人教版/" style="font-size: 18.33px;">人教版</a> <a href="/tags/动漫下载/" style="font-size: 11.67px;">动漫下载</a> <a href="/tags/学习机/" style="font-size: 20px;">学习机</a> <a href="/tags/学习机资料/" style="font-size: 20px;">学习机资料</a> <a href="/tags/我的世界/" style="font-size: 10px;">我的世界</a> <a href="/tags/综艺娱乐/" style="font-size: 10px;">综艺娱乐</a> <a href="/tags/编程/" style="font-size: 10px;">编程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/06/26/《我是歌手第一季》高清迅雷下载（13期全）/">《我是歌手第一季》高清迅雷下载（13期全）</a>
          </li>
        
          <li>
            <a href="/2016/06/22/softether-vpn-client-ver-4-19-build-9599-beta/">SoftEther VPN Client (Ver 4.19, Build 9599, beta)</a>
          </li>
        
          <li>
            <a href="/2016/02/19/Lantern（蓝灯）使用的技巧，针对linux用户/">Lantern（蓝灯）使用的技巧，针对linux用户</a>
          </li>
        
          <li>
            <a href="/2015/10/04/迷死人不赔命,身材胸部超赞超嫩小模可可自拍/">迷死人不赔命,身材胸部超赞超嫩小模可可自拍</a>
          </li>
        
          <li>
            <a href="/2015/10/04/Sublime Text 3 免费使用方法与简体中文汉化包下载/">Sublime Text 3 免费使用方法与简体中文汉化包下载</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>